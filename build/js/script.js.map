{"version":3,"names":[],"mappings":"","sources":["script.js"],"sourcesContent":["\"use strict\";\n\n(function () {\n  const tooltips = document.querySelectorAll(\".all-tooltip .tooltip\");\n  const fullDiv = document.querySelector(\"section\");\n  const container = document.querySelector(\".container\");\n  let timeoutId;\n  window.addEventListener(\"resize\", contentPosition);\n  window.addEventListener(\"DOMContentLoaded\", contentPosition);\n\n  function contentPosition() {\n    tooltips.forEach(tooltip => {\n      const pin = tooltip.querySelector(\".pin\");\n      const pinSize = 20;\n      const pinGap = pinSize / 2;\n      const pinLeft = pin.offsetLeft;\n      const content = tooltip.querySelector(\".tooltip-content\");\n      const arrow = tooltip.querySelector(\".arrow\"); // function getContentCoords(elem) {\n      //   const rect = elem.getBoundingClientRect();\n      //   return {\n      //     y: Math.round(rect.top + window.pageYOffset),\n      //     x: Math.round(rect.left + window.pageXOffset),\n      //   };\n      // }\n      // getContentCoords(pin);\n      // console.log(getContentCoords(pin).x, getContentCoords(pin).y);\n\n      if (pinLeft + content.offsetWidth / 2 > fullDiv.offsetWidth) {\n        const extraLeft = fullDiv.offsetWidth - (pinLeft + content.offsetWidth / 2); // console.log('right-conflict', tooltip)\n\n        content.style.left = `${pinLeft - content.offsetWidth / 2 + extraLeft - pinGap}px`;\n        content.style.top = `${pin.offsetTop + pinSize + pinGap}px`;\n      } else if (pin.offsetLeft + container.offsetLeft < content.offsetWidth / 2) {\n        // console.log('left conflict', pin.offsetLeft, container.offsetLeft);\n        content.style.left = `${-container.offsetLeft + pinGap}px`;\n        content.style.top = `${pin.offsetTop + pinSize + pinGap}px`;\n      } else {\n        content.style.left = `${pinLeft - content.offsetWidth / 2}px`;\n        content.style.top = `${pin.offsetTop + pinSize + pinGap}px`;\n      }\n\n      arrow.style.left = `${pinLeft - content.offsetLeft}px`;\n      content.style.zIndex = 50;\n    });\n  }\n\n  tooltips.forEach(tooltip => {\n    const pin = tooltip.querySelector(\".pin\");\n    const content = tooltip.querySelector(\".tooltip-content\");\n    pin.addEventListener(\"mouseover\", () => {\n      tooltip.classList.add(\"active\");\n    }); // если мышь ушла с пина и зашла на карточку (у неё 2 сек)\n\n    pin.addEventListener(\"mouseleave\", () => {\n      timeoutId = setTimeout(() => {\n        if (!tooltip.classList.contains(\"content-hover\")) {\n          tooltip.classList.remove(\"active\");\n        }\n      }, 2000);\n    });\n    content.addEventListener(\"mouseover\", () => {\n      clearTimeout(timeoutId);\n      tooltip.classList.add(\"active\");\n      tooltip.classList.add(\"content-hover\");\n    });\n    content.addEventListener(\"mouseleave\", () => {\n      timeoutId = setTimeout(() => {\n        tooltip.classList.remove(\"active\");\n        tooltip.classList.remove(\"content-hover\");\n      }, 2000);\n    });\n  }); // пузырьки на кнопке\n\n  function getClickCoords(elem, event) {\n    const rect = elem.getBoundingClientRect();\n    const x = Math.round(event.clientX - rect.left);\n    const y = Math.round(event.clientY - rect.top);\n    return {\n      x,\n      y\n    };\n  }\n\n  const buttons = document.querySelectorAll('.content__button');\n  buttons.forEach(btn => {\n    btn.addEventListener('mousemove', function (evt) {\n      getClickCoords(btn, evt);\n      const coords = getClickCoords(btn, evt);\n      const x = coords.x;\n      const y = coords.y;\n      const bubbles = document.createElement('span');\n      bubbles.classList.add(\"bubble\");\n      bubbles.style.left = `${x}px`;\n      bubbles.style.top = `${y}px`;\n      this.appendChild(bubbles);\n      setTimeout(() => {\n        bubbles.remove();\n      }, 1000);\n    });\n  }); // -------------- отбивает разряды + ₽\n\n  function splitPrice(price) {\n    price = price.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \" \");\n    return `${price} ₽`;\n  }\n\n  let priceDiv = document.querySelectorAll(\".js-price\");\n  priceDiv.forEach(div => div.textContent = splitPrice(div.textContent));\n})();"],"file":"script.js"}